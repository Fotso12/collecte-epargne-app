<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>Dashboard Superviseur</h1>
    <div class="user-info">
      <p><strong>{{ dashboard.nomSuperviseur }}</strong></p>
      <p class="agence">{{ dashboard.agenceNom }}</p>
    </div>
  </div>

  <div *ngIf="errorMessage" class="alert alert-danger">
    {{ errorMessage }}
  </div>

  <div *ngIf="isLoading" class="spinner">
    <p>Chargement...</p>
  </div>

  <div *ngIf="!isLoading" class="dashboard-content">
    <!-- KPIs Cards -->
    <div class="kpi-container">
      <div class="kpi-card bg-primary">
        <div class="kpi-value">{{ dashboard.comptesEnAttenteApprobation }}</div>
        <div class="kpi-label">Comptes en Attente</div>
      </div>

      <div class="kpi-card bg-success">
        <div class="kpi-value">{{ dashboard.collecteursTotal }}</div>
        <div class="kpi-label">Collecteurs Actifs</div>
      </div>

      <div class="kpi-card bg-info">
        <div class="kpi-value">{{ formatMontant(dashboard.montantCollecteJour) }}</div>
        <div class="kpi-label">Collecte Aujourd'hui</div>
      </div>

      <div class="kpi-card bg-warning">
        <div class="kpi-value">{{ formatMontant(dashboard.gainsJourSuperviseur) }}</div>
        <div class="kpi-label">Mes Gains (Jour)</div>
      </div>
    </div>

    <!-- Meilleur Collecteur -->
    <div *ngIf="dashboard.meilleurCollecteur" class="section">
      <h2>Meilleur Collecteur</h2>
      <div class="best-collector-card">
        <div class="collector-header">
          <div class="collector-name">{{ dashboard.meilleurCollecteur.nomCollecteur }}</div>
          <div class="collector-badge">üèÜ Top Collecteur</div>
        </div>
        <div class="collector-stats">
          <div class="stat">
            <span class="label">Montant Collect√©:</span>
            <span class="value">{{ formatMontant(dashboard.meilleurCollecteur.montantCollecte) }}</span>
          </div>
          <div class="stat">
            <span class="label">Clients:</span>
            <span class="value">{{ dashboard.meilleurCollecteur.nombreClients }}</span>
          </div>
          <div class="stat">
            <span class="label">Transactions:</span>
            <span class="value">{{ dashboard.meilleurCollecteur.nombreTransactions }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Historique Collection -->
    <div class="section">
      <h2>Historique Collection</h2>
      <div *ngIf="dashboard.historiquesCollection && dashboard.historiquesCollection.length > 0" class="table-responsive">
        <table class="table">
          <thead>
            <tr>
              <th>P√©riode</th>
              <th>Montant</th>
              <th>Transactions</th>
              <th>Collecteurs</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let history of dashboard.historiquesCollection">
              <td>{{ history.periode }}</td>
              <td>{{ formatMontant(history.montant) }}</td>
              <td>{{ history.nombreTransactions }}</td>
              <td>{{ history.nombreCollecteurs }}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div *ngIf="!dashboard.historiquesCollection || dashboard.historiquesCollection.length === 0" class="no-data">
        Aucun historique disponible
      </div>
    </div>
  </div>
</div>
